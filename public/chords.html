<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript">var exports = {};</script>
    <script type="text/javascript" src="js/chords.js"></script>
    <script type="text/javascript" src="js/svg.js"></script>


    <script>
        function showChord() {
            let root = Number(document.getElementById("rootNote").value)
            let chord = document.getElementById("chord").value.split(",").map(i => Number(i))
            chord = chord.map(i => (i + root) % 12)

            let boards = document.getElementById("boards")
            while(boards.firstChild){
                boards.removeChild(boards.firstChild);
            }

            let tuningOpt = document.getElementById("tuning").value
            let tuning = exports.STANDARD_GUITAR_TUNING
            if (tuningOpt == 'standard') {
                tuning = exports.STANDARD_GUITAR_TUNING
            } else if (tuningOpt == 'openg') {
                tuning = exports.OPEN_G_TUNING
            } else if (tuningOpt == 'opengminor') {
                tuning = exports.OPEN_G_MINOR_TUNING
            } else if (tuningOpt == 'ukulele') {
                tuning = exports.UKULELE_TUNING
            } else {
                console.warn('Unkown tuning ' + tuningOpt);
            }

            let length = document.getElementById("length").value

            let f = exports.fingerings(chord, tuning, length)
            f.forEach(fing => {
                let svg = exports.drawFingering(fing)
                boards.appendChild(svg)
            });
        }

    </script>
</head>

<title>Chord generator</title>

<body>
    
    <form action="">
        <div class="center">
            <label for="rootNote">Chord</label>
            <select id="rootNote">
                <option value="0">C</option>
                <option value="2">D</option>
                <option value="4">E</option>
                <option value="5">F</option>
                <option value="7">G</option>
                <option value="9">A</option>
                <option value="11">B</option>
            </select>
            
            <select id="chord">
                <option value="0,4,7"></option>
                <option value="0,3,7">min</option>
                <option value="0,3,7,9">min6</option>
                <option value="0,3,7,10">min7</option>
                <option value="0,4,7,10">7</option>
                <option value="0,4,7,11">maj7</option>
                <option value="0,4,7,9">6</option>
            </select>

            <label for="tuning">Tuning</label>
            <select name="" id="tuning">
                <option value="standard">Standard</option>
                <option value="openg">OpenG</option>
                <option value="opengminor">OpenG minor</option>
                <option value="ukulele">Ukulele</option>
            </select>

            <label for="length">Frets</label>
            <select id="length">
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
            
            <button onclick="showChord(); return false;">Show</button>
        </div>
    </form>
    <div id="boards"></div>
</body>

</html>