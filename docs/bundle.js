(()=>{"use strict";var t=function(t,r,e){if(e||2===arguments.length)for(var n,i=0,u=r.length;i<u;i++)!n&&i in r||(n||(n=Array.prototype.slice.call(r,0,i)),n[i]=r[i]);return t.concat(n||Array.prototype.slice.call(r))},r=2,e=4,n=7,i=9,u=11,o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],c=15;function a(t,r){return r.map((function(t){return t%12})).indexOf(t%12)}function f(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.reduce((function(r,e){return r.map((function(r){return e.map((function(e){return t(t([],r,!0),[e],!1)}))})).reduce((function(r,e){return t(t([],r,!0),e,!0)}),[])}),[[]])}function l(t,r,e){return(e[t]+r)%12}function s(t){return d(t)?0:Math.max.apply(Math,t.map((function(t){return t.position})))-Math.min.apply(Math,t.map((function(t){return t.position})).filter((function(t){return 0!=t})))+1}function p(t,r,e){var n=r.map((function(e,n){return function(t,r,e){for(var n=[],i=0;i<c;i++){var u=l(t,i,e),o=a(u,r);o>=0&&n.push({position:i,note:u,degree:o})}return n}(n,t,r)}));return f.apply(void 0,n).filter((function(t){return s(t)<=e})).filter((function(r){return function(t,r){var e=t.map((function(t){return t.degree})).reduce((function(t,r){return t|1<<r}),0);return 3==r.length?7==e:15==(4|e)}(r,t)})).filter(v).sort(m)}function d(t){return t.map((function(t){return t.position})).every((function(t){return 0==t}))}function g(t){return d(t)?0:Math.min.apply(Math,t.map((function(t){return t.position})).filter((function(t){return 0!=t})))}function m(t,r){return g(t)-g(r)}function v(t){return t.map((function(t){return t})).reverse().slice(0,3).filter((function(t){return 0==t.degree})).length>0}function h(t){var r=o.indexOf(t);if(r>=0)return r;throw"Unknown note ".concat(t)}[e,i,r,n,u,e].reverse(),[r,n,r,n,u,r].reverse(),[r,n,r,n,10,r].reverse(),[n,0,e,i].reverse();var b="http://www.w3.org/2000/svg",A=40,S=40,y=50,C=20,k=[1,1,2,2,2,3,4,4],x=["green","blue","indigo","violet"];function E(t,r){return function(t,r,e,n){var i=document.createElementNS(b,"line");return i.setAttribute("x1",String(t)),i.setAttribute("y1",String(r)),i.setAttribute("x2",String(t+e)),i.setAttribute("y2",String(r)),i.setAttribute("stroke","black"),i.setAttribute("stroke-width",String(n)),i}(A,S+C*t,y*r,k[t])}function w(t){var r=g(t);r>1&&r%2==0&&s(t)<=3&&(r-=1);var e=function(t,r,e){var n,i,u,o,c=document.createElementNS(b,"svg"),a=A+4*y,f=S+C*t;c.setAttribute("width",a.toString()),c.setAttribute("height",f.toString());for(var l=0;l<t;l++)c.appendChild(E(l,4));for(l=0;l<4;l++)c.appendChild(function(t,r,e){var n=document.createElementNS(b,"line");return n.setAttribute("x1",String(t)),n.setAttribute("y1",String(r)),n.setAttribute("x2",String(t)),n.setAttribute("y2",String(r+e)),n.setAttribute("stroke","black"),n}(A+y*l,S,C*(t-1)));for(l=0;l<4;l++)c.appendChild((n=A+y*l+y/2,i=S+C*t,u=String(l+e),o=void 0,(o=document.createElementNS(b,"text")).setAttribute("y",String(i)),o.setAttribute("x",String(n)),o.setAttribute("fill","black"),o.textContent=u,o));return c}(t.length,0,r);return t.forEach((function(t,n){var i,u,o,c=0==t.position?0:t.position-r+1;e.appendChild((i=n,u=c,o=x[t.degree],function(t,r,e,n){var i=document.createElementNS(b,"circle");return i.setAttribute("cx",t.toString()),i.setAttribute("cy",r.toString()),i.setAttribute("r",e.toString()),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","1"),i.setAttribute("fill",n),i}(0===u?A+y*u-y/4:A+y*u-y/2,S+C*i,5,o)))})),e}function N(t){return document.getElementById(t).value}document.getElementById("search").onclick=function(){var t=Number(N("rootNote"));console.log("Root ${root}");var r=N("chord").split(",").map((function(t){return Number(t)}));console.log("Chord ${chord}"),r=r.map((function(r){return(r+t)%12}));for(var e=document.getElementById("boards");e.firstChild;)e.removeChild(e.firstChild);var n=N("tuning"),i=N("length");return function(t,r,e){return p(t,r.split(" ").map(h).reverse(),e)}(r,n,Number(i)).forEach((function(t){var r=w(t);e.appendChild(r)})),!1}})();