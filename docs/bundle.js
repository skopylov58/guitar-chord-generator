(()=>{"use strict";var t=function(t,e,r){if(r||2===arguments.length)for(var n,i=0,u=e.length;i<u;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},e=2,r=4,n=7,i=9,u=11,o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],c=15;function a(t,e){return e.map((function(t){return t%12})).indexOf(t%12)}function f(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.reduce((function(e,r){return e.map((function(e){return r.map((function(r){return t(t([],e,!0),[r],!1)}))})).reduce((function(e,r){return t(t([],e,!0),r,!0)}),[])}),[[]])}function l(t,e,r){return(r[t]+e)%12}function s(t,e,r){var n=e.map((function(r,n){return function(t,e,r){for(var n=[],i=0;i<c;i++){var u=l(t,i,r),o=a(u,e);o>=0&&n.push({position:i,note:u,degree:o})}return n}(n,t,e)}));return f.apply(void 0,n).filter((function(t){return(d(e=t)?0:Math.max.apply(Math,e.map((function(t){return t.position})))-Math.min.apply(Math,e.map((function(t){return t.position})).filter((function(t){return 0!=t})))+1)<=r;var e})).filter((function(e){return function(t,e){var r=t.map((function(t){return t.degree})).reduce((function(t,e){return t|1<<e}),0);return 3==e.length?7==r:15==(4|r)}(e,t)})).filter(v).sort(g)}function d(t){return t.map((function(t){return t.position})).every((function(t){return 0==t}))}function p(t){return d(t)?0:Math.min.apply(Math,t.map((function(t){return t.position})).filter((function(t){return 0!=t})))}function g(t,e){return p(t)-p(e)}function v(t){return t.map((function(t){return t})).reverse().slice(0,3).filter((function(t){return 0==t.degree})).length>0}function m(t){var e=o.indexOf(t);if(e>=0)return e;throw"Unknown note ".concat(t)}[r,i,e,n,u,r].reverse(),[e,n,e,n,u,e].reverse(),[e,n,e,n,10,e].reverse(),[n,0,r,i].reverse();var h="http://www.w3.org/2000/svg",b=40,A=40,S=50,y=20,C=[1,1,2,2,2,3,4,4],k=["green","blue","indigo","violet"];function x(t,e){return r=b,n=A+y*t,i=S*e,u=C[t],(o=document.createElementNS(h,"line")).setAttribute("x1",String(r)),o.setAttribute("y1",String(n)),o.setAttribute("x2",String(r+i)),o.setAttribute("y2",String(n)),o.setAttribute("stroke","black"),o.setAttribute("stroke-width",String(u)),o;var r,n,i,u,o}function E(t,e,r){var n=document.createElementNS(h,"text");return n.setAttribute("y",String(e)),n.setAttribute("x",String(t)),n.setAttribute("fill","black"),n.textContent=r,n}function w(t,e){var r=function(t,e,r){var n,i,u,o,c=document.createElementNS(h,"svg"),a=b+4*S,f=A+y*t;c.setAttribute("width",a.toString()),c.setAttribute("height",f.toString());for(var l=0;l<t;l++)c.appendChild(x(l,4));for(l=0;l<4;l++)c.appendChild((n=void 0,i=void 0,u=void 0,o=void 0,n=b+S*l,i=A,u=y*(t-1),(o=document.createElementNS(h,"line")).setAttribute("x1",String(n)),o.setAttribute("y1",String(i)),o.setAttribute("x2",String(n)),o.setAttribute("y2",String(i+u)),o.setAttribute("stroke","black"),o));for(l=0;l<4;l++)c.appendChild(E(b+S*l+S/2,A+y*t,String(l+r)));return c}(t.length,0,e);return t.forEach((function(t,n){var i,u,o,c=0==t.position?0:t.position-e+1;r.appendChild((i=n,u=c,o=k[t.degree],function(t,e,r,n){var i=document.createElementNS(h,"circle");return i.setAttribute("cx",t.toString()),i.setAttribute("cy",e.toString()),i.setAttribute("r",r.toString()),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","1"),i.setAttribute("fill",n),i}(0===u?b+S*u-S/4:b+S*u-S/2,A+y*i,5,o)))})),r}function N(t){return document.getElementById(t).value}document.getElementById("search").onclick=function(){var t=Number(N("rootNote"));console.log("Root ${root}");var e=N("chord").split(",").map((function(t){return Number(t)}));console.log("Chord ${chord}"),e=e.map((function(e){return(e+t)%12}));for(var r=document.getElementById("boards");r.firstChild;)r.removeChild(r.firstChild);var n=N("tuning"),i=N("length");return function(t,e,r){return s(t,e.split(" ").map(m).reverse(),r)}(e,n,Number(i)).forEach((function(t){var e=w(t,p(t));r.appendChild(e)})),!1}})();